# Мульти-модельный AI Workflow

Система координации нескольких AI моделей через Perplexity Pro для оптимального решения задач.

## Концепция

Каждая модель имеет свои сильные стороны. Вместо использования одной модели для всего, мы:
1. Делегируем задачи специализированным моделям
2. Claude Code координирует workflow
3. Собираем результаты и реализуем план

## Специализации моделей (2025)

| Модель | Роль | Slash Command | Лучше для |
|--------|------|---------------|-----------|
| **GPT-5.1** | Архитектор | `/architect` | System design, структура проекта, API |
| **Claude Sonnet 4.5** | Кодер | — (я сам) | Backend, бизнес-логика, debugging |
| **Claude Opus 4.5** | Эксперт | `/audit` | Аудит, безопасность, edge cases |
| **Gemini 3 Pro** | Дизайнер | `/frontend` | UI компоненты, стили, вёрстка |
| **Grok 4.1** | Аналитик | `/trends` | Актуальные данные, тренды, новости |
| **Kimi K2** | Исследователь | `/deep-analyze` | Глубокий анализ, 200+ итераций |
| **Research Mode** | Учёный | `/deep-research` | Академический анализ с источниками |

## Доступные команды

### Исследование
```
/deep-research [тема]     # Perplexity Research Mode (5-15 мин)
/trends [вопрос]          # Grok 4.1 — актуальная информация
/deep-analyze [задача]    # Kimi K2 — автономный глубокий анализ
```

### Проектирование
```
/architect [задача]       # GPT-5.1 — архитектура проекта
/audit [код/архитектура]  # Opus 4.5 — аудит и проверка
```

### Реализация
```
/frontend [компонент]     # Gemini 3 Pro — UI компоненты
/ask-gpt5 [вопрос]        # GPT-5.1 — общий вопрос
/ask-claude-perplexity    # Claude через Perplexity
```

### Контекст проекта
```
/ask-space [space] [вопрос]     # Запрос в Perplexity Space
/ask-with-files [файлы] [вопрос] # Запрос с файлами проекта
```

## Идеальный Workflow для нового проекта

### Этап 1: Исследование
```
/deep-research [тема проекта]
# → Получаем обзор рынка, конкурентов, технологий

/trends [конкуренты и тренды]
# → Актуальная ситуация на рынке
```

### Этап 2: Архитектура
```
/architect [описание проекта]
# → Получаем:
#   - Структуру папок
#   - Компоненты системы
#   - API design
#   - Database schema
#   - Технологический стек
```

### Этап 3: Аудит архитектуры
```
/audit [архитектура из этапа 2]
# → Проверка на:
#   - Безопасность
#   - Масштабируемость
#   - Edge cases
#   - Потенциальные проблемы
```

### Этап 4: Реализация
```
Claude Code → Backend, API, бизнес-логика
/frontend [компонент] → UI компоненты от Gemini
```

### Этап 5: Ревью
```
/audit [готовый код]
# → Code review на критичные проблемы
```

## Пример: SaaS для аналитики маркетплейсов

```bash
# 1. Исследование
/deep-research SaaS аналитика маркетплейсов Wildberries Ozon 2025

# 2. Архитектура
/architect SaaS для аналитики WB/Ozon:
- API для получения данных
- Dashboard с метриками
- Уведомления о изменениях
- Мультитенантность

# 3. Аудит
/audit [вставить архитектуру] — проверь масштабируемость

# 4. Frontend
/frontend React dashboard с графиками продаж, метриками и таблицей товаров

# 5. Backend — Claude Code реализует
# 6. Final review
/audit src/ — проверь безопасность API endpoints
```

## Ограничения

### Подписка Perplexity
- **Pro ($20/мес)**: Sonar, GPT-5.1, Claude Sonnet, Gemini, Grok, Kimi K2
- **Max ($200/мес)**: + Claude Opus 4.5, o3-pro

### Скорость
- Sonar: 5-10 сек
- GPT-5.1, Claude, Gemini, Grok: 20-60 сек
- Kimi K2: 60-180 сек (thinking mode)
- Research Mode: 5-15 мин

### Контекст
- Модели НЕ видят файлы VS Code напрямую
- Используй `/ask-with-files` для передачи контекста
- Или создай Perplexity Space с файлами проекта

## Архитектура системы

```
┌─────────────────────────────────────────────────────┐
│                    Claude Code                       │
│              (координатор workflow)                  │
└─────────────────────┬───────────────────────────────┘
                      │
         ┌────────────┼────────────┐
         │   Playwright MCP        │
         │   (browser automation)  │
         └────────────┬────────────┘
                      │
         ┌────────────┼────────────┐
         │    Perplexity.ai        │
         │    (Pro subscription)   │
         └────────────┬────────────┘
                      │
    ┌─────────┬───────┴───────┬─────────┐
    │         │               │         │
┌───┴───┐ ┌───┴───┐     ┌─────┴───┐ ┌───┴───┐
│GPT-5.1│ │Claude │     │ Gemini  │ │ Grok  │
│       │ │Sonnet │     │ 3 Pro   │ │ 4.1   │
└───────┘ └───────┘     └─────────┘ └───────┘
```

## Tips

1. **Кэшируй архитектуру** — сохрани результат `/architect` в файл проекта
2. **Используй Spaces** — загрузи CLAUDE.md в Perplexity Space для постоянного контекста
3. **Параллельные запросы** — можно открыть несколько вкладок Perplexity
4. **Research для сложного** — `/deep-research` для задач требующих много источников
